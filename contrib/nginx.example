server {
	listen 80;
	listen [::]:80;
	listen 443 ssl spdy;
	listen [::]:443 ssl spdy;
	
	server_name ltb.server.home.lan;
	
	access_log /var/log/nginx/ltb.access.log;
	error_log /var/log/nginx/ltb.error.log;
	
	ssl_certificate /etc/nginx/cert/ltb.virtualdreamsdd.dyndns.org.crt;
	ssl_certificate_key /etc/nginx/cert/ltb.virtualdreamsdd.dyndns.org.key;
	
	server_tokens off;
	
	client_max_body_size 5M;
	
	root /srv/www/ltbdb2-core/wwwroot;
	
	location ~ ^/(content|css|js)/ {
        expires 30d;
        add_header Pragma public;
        add_header Cache-Control "public";
    }
	
	# images are located outside the app directory
    location /images/ {
        alias /srv/www/ltbdb2-core-images/;
        expires 30d;
        add_header Pragma public;
        add_header Cache-Control "public";
    }

	location / {
		proxy_pass http://127.0.0.1:5001;
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection keep-alive;
		proxy_set_header Host $host;
		proxy_cache_bypass $http_upgrade;
	}
}
